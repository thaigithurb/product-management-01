extends ../../layouts/default.pug
include ../../mixins/box-head.pug


block main 
    div(class="w-[1200px] mx-auto py-[50px]")
        div(class="mb-[30p] pb-[15px]")
            a(href="/users/not-friend" class="mr-[10px] border border-[#0078F0] cursor-pointer hover:bg-[#0066CC] bg-[#0078F0] p-[10px] rounded-[5px] text-[#ffff]") Danh sách người dùng 
            a(href="/users/friends" class="mr-[10px] border border-[#0078F0] cursor-pointer hover:bg-[#0066CC] bg-[#0078F0] p-[10px] rounded-[5px] text-[#ffff]") Danh sách bạn bè
            a(href="/users/request" class="mr-[10px] border border-[#0078F0] cursor-pointer hover:bg-[#0066CC] bg-[#0078F0] p-[10px] rounded-[5px] text-[#ffff]") Lời mời đã gửi
            a(href="/users/accept" class="mr-[10px] border border-[#0078F0] cursor-pointer hover:bg-[#0066CC] bg-[#0078F0] p-[10px] rounded-[5px] text-[#ffff]") Lời mời kết bạn

        div
            +box-head(pageTitle)

        div(class="chat-box")
            div(class="messages")
                each chat in chats 
                    div(class=`message ${chat.user_id == user.id ? 'right' : 'left'}`)
                        if (chat.user_id !== user.id)
                            div(class="name") #{chat.infoUser.fullName}
                        if (chat.content)
                            p #{chat.content}  
                        if (chat.images && chat.images.length > 0)
                            each image in chat.images 
                                img(src=image class="w-[400px] rounded-[10px] mt-[12px]")
                div(class="inner-list-typing")
            form(action="" class="input-bar" my-id=user.id my-name=user.fullName)
                div(class="inner-preview-images") 
                    div(class="custom-file-container images-upload" data-upload-id="images-upload")
                div(class="flex items-center mt-[10px]")
                    input(type="text" placeholder="Nhập nội dung..." name="content")
                    div(class="button-icon text-[#FF4DA6] ml-[8px] text-[30px] cursor-pointer") <i class="fa-solid fa-face-smile"></i>
                    label(class="button-icon text-[#FF4DA6] ml-[8px] text-[30px] cursor-pointer" for="file-upload-with-preview-images-upload") <i class="fa-solid fa-image"></i>
                    div(class="tooltip" role="tooltip")
                        emoji-picker
                    button(type="submit" class="send-btn text-[#ffff]")
                        i(class="fa-solid fa-paper-plane")

block script               
    script(type="module" src="/js/chat.js") 
                            